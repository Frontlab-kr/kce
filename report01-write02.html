<?php
	include_once $_SERVER['DOCUMENT_ROOT']."/inc/report1_header.html";
?>
					<!-- Page content-->
					<div class="col-lg-9 mt-5 pt-lg-5">
						<h1 class="mb-5"><mark class="cname"><?=$_SESSION['USER_CNAME']?></mark> 자체평가보고서 작성</h1>
						
						<!-- 1. 영유아 중심 일과 운영 -->
						<section class="card border-0 py-1 p-md-2 p-xl-3 p-xxl-4 mb-4 overflow-hidden" id="section01">
							<div class="card-body">
								<div class="d-flex align-items-center mt-sm-n1 pb-2 mb-0 mb-lg-1 mb-xl-3">
									<h2 class="h4 mb-lg-0">영역 1. 영유아 중심 일과 운영</h2>
								</div>
								<!-- Basic table -->
								<form class="ckeditor_form" name="frm" id="frm" method="POST" action="javascript:;">
								<input type="hidden" name="type" value="insert2" />
								<div class="table-responsive">
									<table class="table table-bordered" style="min-width: 800px">
										<colgroup>
											<col style="width: 10%" />
											<col style="width: 60%" />
											<col style="width: 30%" />
										</colgroup>
										<thead>
											<tr>
												<th class="text-center align-middle" rowspan="2">평가<br />항목</th>
												<th class="text-center align-middle" rowspan="2">평가내용</th>
												<th class="text-center align-middle">어린이집의 수준</th>
											</tr>
											<tr>
												<th>
													<div class="table-question">
														<span> 전혀<br />그렇지<br />않다 </span>
														<span> 그렇지<br />않다 </span>
														<span> 보통이다 </span>
														<span> 그렇다 </span>
														<span> 매우<br />그렇다 </span>
													</div>
												</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<th scope="row" rowspan="2" class="text-center">1-1</th>
												<td>
													<strong><mark>일과의 충실한 운영</mark></strong>
												</td>
												<td rowspan="2" class="align-middle">
													<div class="d-flex justify-content-center">
														<div class="me-3">
															<input type="radio" class="btn-check" id="answer1-1-1" name="answer1-1" value="1" checked />
															<label for="answer1-1-1" class="btn btn-outline-secondary px-2">
																<span class="mx-1">1</span>
															</label>
														</div>
														<div class="me-3">
															<input type="radio" class="btn-check" id="answer1-1-2" name="answer1-1" value="2" />
															<label for="answer1-1-2" class="btn btn-outline-secondary px-2">
																<span class="mx-1">2</span>
															</label>
														</div>
														<div class="me-3">
															<input type="radio" class="btn-check" id="answer1-1-3" name="answer1-1" value="3" />
															<label for="answer1-1-3" class="btn btn-outline-secondary px-2">
																<span class="mx-1">3</span>
															</label>
														</div>
														<div class="me-3">
															<input type="radio" class="btn-check" id="answer1-1-4" name="answer1-1" value="4" />
															<label for="answer1-1-4" class="btn btn-outline-secondary px-2">
																<span class="mx-1">4</span>
															</label>
														</div>
														<div>
															<input type="radio" class="btn-check" id="answer1-1-5" name="answer1-1" value="5" />
															<label for="answer1-1-5" class="btn btn-outline-secondary px-2">
																<span class="mx-1">5</span>
															</label>
														</div>
													</div>
												</td>
											</tr>
											<tr>
												<td style="word-break: keep-all">
													영유아의 놀이가 충분히 이루어지고, 영유아의 관심사와 놀이 특성, 신체리듬, 날씨 등의 상황을 고려하여 일과를 융통성
													있게 운영한다. <br />
													또한, 영유아의 비언어적‧언어적 의사 표현을 존중하여 하루 일과를 운영한다.
												</td>
											</tr>
											<tr>
												<th scope="row" rowspan="2" class="text-center">1-2</th>
												<td>
													<strong><mark>따뜻하고 편안한 일상생활 지원</mark></strong>
												</td>
												<td rowspan="2" class="align-middle">
													<div class="d-flex justify-content-center">
														<div class="me-3">
															<input type="radio" class="btn-check" id="answer1-2-1" name="answer1-2" value="1" checked />
															<label for="answer1-2-1" class="btn btn-outline-secondary px-2">
																<span class="mx-1">1</span>
															</label>
														</div>
														<div class="me-3">
															<input type="radio" class="btn-check" id="answer1-2-2" name="answer1-2" value="2" />
															<label for="answer1-2-2" class="btn btn-outline-secondary px-2">
																<span class="mx-1">2</span>
															</label>
														</div>
														<div class="me-3">
															<input type="radio" class="btn-check" id="answer1-2-3" name="answer1-2" value="3" />
															<label for="answer1-2-3" class="btn btn-outline-secondary px-2">
																<span class="mx-1">3</span>
															</label>
														</div>
														<div class="me-3">
															<input type="radio" class="btn-check" id="answer1-2-4" name="answer1-2" value="4" />
															<label for="answer1-2-4" class="btn btn-outline-secondary px-2">
																<span class="mx-1">4</span>
															</label>
														</div>
														<div>
															<input type="radio" class="btn-check" id="answer1-2-5" name="answer1-2" value="5" />
															<label for="answer1-2-5" class="btn btn-outline-secondary px-2">
																<span class="mx-1">5</span>
															</label>
														</div>
													</div>
												</td>
											</tr>
											<tr>
												<td style="word-break: keep-all">
													영유아의 신체리듬과 속도에 맞추어 일상생활을 지원한다.<br />
													등원 시 영유아를 반갑게 맞이하고, 식사와 간식시간에 영유아가 서두르지 않고 편안하고 즐겁게 먹을 수 있도록 한다.<br />
													또한 영유아의 배변 경험이 개별적으로 이루어지도록 돕는다.<br />
													영유아의 개별 특성에 맞추어 편안하게 자거나 휴식하고, 일상생활지도를 위해 필수적으로 요구되는 최소한의 약속과 규칙을 공유하며 따뜻한 분위기에서 귀가하도록 한다.
												</td>
											</tr>
										</tbody>
									</table>
									
									<h5 class="pt-3">총평</h5>
									<table class="table table-bordered" style="min-width: 800px">
										<!-- <colgroup>
											<col style="width: 50%" />
											<col style="width: 50%" />
										</colgroup> -->
										<thead>
											<tr>
												<th class="text-center">어린이집의 강점 혹은 개선이 필요한 부분에 대해 작성해 주세요.</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<td>
													<textarea class="form-control" name="data1-1" rows="5"></textarea>
												</td>
												<!-- <td>
													<textarea class="form-control" name="data1-2" rows="5"></textarea>
												</td> -->
											</tr>
										</tbody>
									</table>
								</div>
								</form>
							</div>
						</section>
						<div class="d-flex justify-content-between py-4">
							<p class="d-flex justify-content-center w-100">
								<a class="btn btn-outline-secondary mx-2" href="report01-write01.html">이전</a>
								<button type="button" class="btn btn-primary mx-2" href="#alert01" data-bs-toggle="modal">임시저장</button>
								<a class="btn btn-outline-secondary mx-2" href="report01-write03.html">다음</a>
							</p>
						</div>
					</div>
				</div>
			</div>
			<!-- Divider for dark mode only-->
			<hr class="d-none d-dark-mode-block" />
			<!-- Sidebar toggle button-->

			<div class="modal fade" id="alert01" data-bs-backdrop="static" tabindex="-1" role="dialog">
				<div class="modal-dialog modal-dialog-centered modal-md" role="document">
					<div class="modal-content">
						<div class="modal-header border-0">
							<h4 class="modal-title"></h4>
							<button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
						</div>
						<div class="modal-body pt-0">
							<p>임시저장 하시겠습니까?</p>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary w-100 w-sm-auto mb-3 mb-sm-0" data-bs-dismiss="modal">취소</button>
							<button type="button" class="btn btn-primary w-100 w-sm-auto ms-sm-2" data-bs-dismiss="modal" onclick="frmSubmit2()">확인</button>
						</div>
					</div>
				</div>
			</div>
			<div class="modal fade" id="alert02" data-bs-backdrop="static" tabindex="-1" role="dialog">
				<div class="modal-dialog modal-dialog-centered modal-md" role="document">
					<div class="modal-content">
						<div class="modal-header border-0">
							<h4 class="modal-title"></h4>
							<button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
						</div>
						<div class="modal-body pt-0">
							<p>최종 제출 하시겠습니까?</p>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary w-100 w-sm-auto mb-3 mb-sm-0" data-bs-dismiss="modal">취소</button>
							<button type="button" class="btn btn-primary w-100 w-sm-auto ms-sm-2" data-bs-dismiss="modal">확인</button>
						</div>
					</div>
				</div>
			</div>
		</main>
		<!-- Footer-->
		<!-- Vendor scripts: js libraries and plugins-->
		<script src="/assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
		<script src="/assets/vendor/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>
		<script src="/assets/vendor/cleave.js/dist/cleave.min.js"></script>
		<script src="/assets/vendor/jquery/jquery-3.1.1.min.js"></script>
		<script src="/assets/vendor/jquery/jquery.form.js"></script>
		<!-- Main theme script-->
		<script src="/assets/js/theme.min.js"></script>
<script>
	function getReport(){
		$.ajax({
			type : 'post'
			, async  :  true
			, url  :  '/api/report1.api.php'
			, data : {
				type : 'getReport'
			}
			, success : function(response) {
				if(response.RESULT == 1){
					var data = response.DATA;
					
					if(data.sel1_1 != ""){
						$("input[name='answer1-1'][value='"+data.sel1_1+"']").prop("checked", true);
					}

					if(data.data1_1 != ""){
						$("textarea[name='data1-1']").text(data.data1_1);
					}

					if(data.sel1_2 != ""){
						$("input[name='answer1-2'][value='"+data.sel1_2+"']").prop("checked", true);
					}

					if(data.data1_2 != ""){
						$("textarea[name='data1-2']").text(data.data1_2);
					}
				}else{
					
				}
			}
			, error : function(request, status, error) {
				//console.log(error);
				return;
			}
			, cache : false
			, dataType : 'json'
		});
	}
	function frmSubmit2(){
		$data1_1 = $("textarea[name='data1-1']");
		if($data1_1.val() == "" || !$data1_1.val()){
			alert('총평을 작성해주세요.');
			return false;
		}
		$data1_2 = $("textarea[name='data1-2']");
		if($data1_2.val() == "" || !$data1_2.val()){
			alert('총평을 작성해주세요.');
			return false;
		}
		
		
		document.frm.action = "/api/report1.api.php";

		$('#frm').ajaxSubmit({
			dataType:  'json'
			,success : function(response) {
				if(response.RESULT == 1){
					alert(response.MSG + " 다음페이지로 이동합니다.");
					location.href='/report01-write03.html';
				}else{
					alert(response.MSG);
					location.reload();
				}
			}
		});
	}

	$(document).ready(function(){
		getReport();
	});
</script>
	</body>
</html>
